<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ .Site.Title }}</title>
    <meta name="description" content="{{ .Site.Params.description }}">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <!-- Load MathJax if math rendering is enabled -->
    {{ if .Param "math" }}
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-svg.js"></script>
        <script>
          MathJax = {
            tex: {
              displayMath: [['\\[', '\\]'], ['$$', '$$']],  // block
              inlineMath: [['\\(', '\\)']]                  // inline
            },
            loader:{
              load: ['ui/safe']
            },
          };
        </script>
    {{ end }}
    <!-- Enable Umami analytics -->
    {{ if hugo.IsProduction }}
    <script defer src="https://cloud.umami.is/script.js" data-website-id="43ca28a6-2011-4444-b855-23601ce80f46"></script>
    {{ end }}
</head>

<body>
    <header>
        <h1><a href="{{ .Site.BaseURL | relURL}}">{{ .Site.Title }}</a></h1>
        <nav>
            <!-- Highlight the current page in the navigation bar -->
            <a href="{{ "/micro-blog/" | relURL }}"{{ if hasPrefix .RelPermalink "/micro-blog/" }} class="selected"{{ end }}>Microblog</a>
            <a href="{{ "/blog/" | relURL }}"{{ if hasPrefix .RelPermalink "/blog/" }} class="selected"{{ end }}>Blog</a>
            <a href="{{ "/index.xml" | relURL }}" class="rss-link" title="Subscribe to RSS feed">
                <span class="rss-icon"></span>
            </a>
        </nav>
    </header>
    <main>
        {{ block "main" . }}{{ end }}
    </main>
    <!-- Add copy-to-clipboard functionality for code blocks -->
    <script src="/js/copy-code.js"></script>

    <!-- Add Mermaid code block rendering support -->
    {{ if .Store.Get "hasMermaid" }}
        <script type="module">
            import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });
        </script>
    {{ end }}
</body>

</html>
