<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ .Site.Title }}</title>
    <meta name="description" content="{{ .Site.Params.description }}">
    <link rel="stylesheet" href="{{ (resources.Get "css/style.css" | minify | fingerprint).RelPermalink }}">
    <link rel="stylesheet" href="{{ (resources.Get "css/syntax.css" | minify | fingerprint).RelPermalink }}">

    {{with .OutputFormats.Get "rss" }}
        {{- printf `<link rel=%q type=%q href=%q title=%q>` .Rel .MediaType.Type .Permalink site.Title | safeHTML -}}
    {{- end -}}
    <!-- Load MathJax if math rendering is enabled -->
    {{ if .Param "math" }}
        {{ partialCached "math.html" . }}
    {{ end }}
    <!-- Enable Umami analytics -->
    {{ if hugo.IsProduction }}
    <script defer src="https://cloud.umami.is/script.js" data-website-id="43ca28a6-2011-4444-b855-23601ce80f46"></script>
    {{ end }}
</head>

<body>
    <header>
        <h1>
            <a href="{{ .Site.BaseURL | relURL}}">{{ .Site.Title }}</a>
            <!-- Single site-wide RSS icon link -->
            <a href="{{ "/index.xml" | relURL }}" class="rss-icon-link" aria-label="Subscribe to RSS" title="Subscribe to RSS">
                <svg class="rss-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" aria-hidden="true" focusable="false">
                    <path fill="currentColor" d="M96 128C96 110.3 110.3 96 128 96C357.8 96 544 282.2 544 512C544 529.7 529.7 544 512 544C494.3 544 480 529.7 480 512C480 317.6 322.4 160 128 160C110.3 160 96 145.7 96 128zM96 480C96 444.7 124.7 416 160 416C195.3 416 224 444.7 224 480C224 515.3 195.3 544 160 544C124.7 544 96 515.3 96 480zM128 224C287.1 224 416 352.9 416 512C416 529.7 401.7 544 384 544C366.3 544 352 529.7 352 512C352 388.3 251.7 288 128 288C110.3 288 96 273.7 96 256C96 238.3 110.3 224 128 224z"/>
                </svg>
            </a>
        </h1>
        <nav>
            <!-- Highlight the current page in the navigation bar -->
            <a href="{{ "/micro-blog/" | relURL }}"{{ if hasPrefix .RelPermalink "/micro-blog/" }} class="selected"{{ end }}>Microblog</a>
            <a href="{{ "/blog/" | relURL }}"{{ if hasPrefix .RelPermalink "/blog/" }} class="selected"{{ end }}>Blog</a>
        </nav>
    </header>
    <main>
        {{ block "main" . }}{{ end }}
    </main>
    <!-- Add copy-to-clipboard functionality for code blocks -->
    <script src="{{ (resources.Get "js/copy-code.js").RelPermalink }}"></script>

    <!-- Add Mermaid code block rendering support -->
    {{ if .Store.Get "hasMermaid" }}
        <script type="module">
            import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
            mermaid.initialize({ startOnLoad: true });
        </script>
    {{ end }}
</body>

</html>
