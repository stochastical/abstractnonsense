/* ======= BASE STYLES ======= */
/* Theme tokens moved to :root for idiomatic custom property usage */
:root {
    /* New semantic color tokens (light mode) */
    --color-fg: #121212;
    --color-bg: #ffffff;
    --color-accent: #2749c9;
    --color-accent-contrast: #ffffff;
    --color-code-inline-bg: rgba(39, 73, 201, 0.12);
    --color-code-inline-fg: #111111;
    --color-code-block-bg: #f5f7fb;
    --color-code-block-border: #e2e6ef;
    --color-link: var(--color-accent);
    /* Legacy variable mapping for existing styles */
    --textcolor: var(--color-fg);
    --bgcolor: var(--color-bg);
    --highlight: var(--color-accent);
    --highlight-rgb: 39, 73, 201; /* numeric for rgba() usage */
    scroll-behavior: smooth;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

@view-transition {
    navigation: auto;
}

@media (prefers-color-scheme: dark) {
    :root {
        --color-fg: #e0e0e0;
        --color-bg: #141414;
        --color-accent: #ffc400;
        --color-accent-contrast: #141414;
        --color-code-inline-bg: rgba(255, 196, 0, 0.20);
        --color-code-inline-fg: #ffffff;
        --color-code-block-bg: #1f1f1f;
        --color-code-block-border: #2a2a2a;
        --color-link: var(--color-accent);
        /* Legacy mapping */
        --textcolor: var(--color-fg);
        --bgcolor: var(--color-bg);
        --highlight: var(--color-accent);
        --highlight-rgb: 255, 196, 0;
    }
}

body {
    font-family: system-ui, sans-serif;
    font-size: 18px;
    line-height: 1.4;
    color: var(--textcolor);
    background: var(--bgcolor);
    position: relative;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}

/* ======= TYPOGRAPHY ======= */
h2, h3, h4 {
    font-size: 1em;
    font-weight: 600;
    margin: 1.6em 0 .6em 0;
}

p, ul, ol, article {
    max-width: 80ch;
    margin-bottom: .6em;
}

/* Articles use Georgia serif font, but not tags */
article {
    font-family: "Georgia", "Times New Roman", serif;
}

article .tag {
    font-family: system-ui, sans-serif;
}

/* Definition lists */
dl {
    max-width: 60ch;
    margin-bottom: 1em;
}

dt {
    font-family: "Georgia", "Garamond", serif;
    font-weight: 700;
    font-size: 1.1em;
    color: var(--highlight);
    margin: 1.2em 0 0.3em 0;
    position: relative;
    letter-spacing: 0.01em;
    display: inline;
}

dt:first-child {
    margin-top: 0;
}

dt::after {
    content: ": ";
    position: static;
    background: none;
    width: auto;
    height: auto;
    opacity: 1;
    border-radius: 0;
    color: var(--highlight);
    font-weight: 700;
}

dd {
    font-family: "Georgia", "Garamond", serif;
    margin: 0 0 0.8em 0;
    padding-left: 0;
    border-left: none;
    line-height: 1.6;
    position: relative;
    font-size: 0.95em;
    display: inline;
}

@media (prefers-color-scheme: dark) {
    dd {
        border-left-color: rgba(255, 196, 0, 0.2);
    }
}

dd p {
    margin-bottom: 0.4em;
    display: inline;
}

dd em {
    font-style: italic;
    opacity: 0.85;
    font-size: 0.98em;
    font-family: "Georgia", "Garamond", serif;
}

dd::after {
    content: "";
    display: block;
    margin-bottom: 0.8em;
}

/* Collapsible alphabet sections */
details {
    font-family: "Georgia", "Garamond", serif;
    max-width: 100%;
    margin-bottom: 0.8em;
    border: 1px solid rgba(var(--highlight-rgb), 0.1);
    border-radius: 4px;
    overflow: hidden;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

details:hover {
    border-color: rgba(var(--highlight-rgb), 0.2);
    box-shadow: 0 2px 8px rgba(var(--highlight-rgb), 0.05);
}

summary {
    font-family: "Georgia", "Garamond", serif;
    font-weight: 700;
    font-size: 0.9em;
    color: var(--highlight);
    background-color: rgba(var(--highlight-rgb), 0.03);
    padding: 0.4em 0.6em;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    border-bottom: 1px solid rgba(var(--highlight-rgb), 0.1);
    min-height: 2em;
}

summary:hover {
    background-color: rgba(var(--highlight-rgb), 0.08);
}

summary::marker {
    display: none;
}

summary::after {
    content: "";
    margin-left: auto;
    width: 0;
    height: 0;
    border-left: 0.4em solid var(--highlight);
    border-top: 0.25em solid transparent;
    border-bottom: 0.25em solid transparent;
    transition: transform 0.2s ease;
    flex-shrink: 0;
}

details[open] summary::after {
    transform: rotate(90deg);
}

details[open] summary {
    border-bottom-color: rgba(var(--highlight-rgb), 0.15);
}

details > *:not(summary) {
    padding: 0.6em 0.7em 0.4em 0.7em;
}

details dl {
    margin: 0;
}

details dt:first-child {
    margin-top: 0;
}

details dt {
    margin-top: 0.6em;
}

details dt:first-of-type {
    margin-top: 0;
}

b, strong {
    font-weight: 600;
}

small {
    font-size: .85em;
}

hr {
    height: 1px;
    border: 0;
    background: currentColor;
    opacity: .1;
    margin: 1.2em 0;
}

mark {
    background-color: #fcf8e3;
    padding: .2em;
}

blockquote {
    padding-left: 2.5ch; /* Increased padding */
    padding-top: 0.5em; /* Added top padding */
    padding-bottom: 0.5em; /* Added bottom padding */
    opacity: .9; /* Slightly adjusted opacity for text if needed, or keep at .7 if preferred */
    margin-top: 1em; /* Added top margin */
    margin-bottom: 1em; /* Adjusted bottom margin */
    position: relative;
    background-color: rgba(var(--highlight-rgb), 0.05);
    border-radius: 8px; /* Optional: rounded corners */
}

blockquote:before {
    content: "";
    position: absolute;
    left: 0.5ch; /* Adjusted position to align with new padding */
    top: .5em;
    bottom: .5em;
    background: var(--highlight); /* Use highlight color for border */
    width: 3px; /* Thicker border */
    opacity: 1; /* Full opacity for the border */
    border-radius: 8px; /* Optional: rounded border */
}

/* ======= LINKS & CODE ======= */
/* Unified link styling */
a {
    color: var(--color-link);
    text-decoration: none;
    text-underline-offset: 2px;
    transition: color 0.15s ease, text-decoration-color 0.15s ease;
}
a:hover, a:focus-visible {
    text-decoration: underline;
}

/* Base monospace font */
code, pre, kbd, samp {
    font-family: ui-monospace, "SF Mono", Menlo, Monaco, "Andale Mono", monospace;
    font-size: 0.95em;
    line-height: 1.4;
}

/* Inline code */
code:not(pre code) {
    background: var(--color-code-inline-bg);
    color: var(--color-code-inline-fg);
    padding: 0.15em 0.4em;
    border-radius: 4px;
    position: relative;
    top: -1px; /* optical alignment */
    word-break: break-word;
    overflow-wrap: break-word;
}

/* Inline code when inside a link: inherit link color but keep background */
a code {
    color: currentColor;
    background: var(--color-code-inline-bg);
    padding: 0.15em 0.4em;
    border-radius: 4px;
}

/* SVG icon within links (kept) */
a svg.icon { width: 1em; height: 1em; vertical-align: text-bottom; margin-right: 0.45em; fill: currentColor; }
a svg.icon path { fill: currentColor; }

/* Code blocks */
pre {
    background: var(--color-code-block-bg);
    border: 1px solid var(--color-code-block-border);
    border-radius: 6px;
    padding: 1em 1.1em;
    overflow-x: auto;
    margin: 1.3em 0;
    position: relative;
}
pre code {
    background: transparent;
    color: var(--color-fg);
    padding: 0;
    white-space: pre;
}

/* Selection */
pre::selection, code::selection { background: rgba(var(--highlight-rgb), 0.25); }
pre code::selection { background: rgba(var(--highlight-rgb), 0.25); }

@media (prefers-color-scheme: dark) {
    pre code { color: #f5f5f5; }
    a:hover, a:focus-visible { text-decoration-thickness: 2px; }
}


/* GitHub links icon */
a[href*="github.com"]::before {
    content: "";
    display: inline-block;
    width: 1em;
    height: 1em;
    margin-right: 0.35em;
    vertical-align: -0.15em;
    background: currentColor;
    /* Use mask so color adapts to currentColor */
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.62 7.62 0 0 1 2-.27c.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8Z"/></svg>') center/contain no-repeat;
}

/* Mailto links icon */
a[href^="mailto:"]::before {
    content: "";
    display: inline-block;
    width: 1em;
    height: 1em;
    margin-right: 0.35em;
    vertical-align: -0.15em;
    background: currentColor;
    /* Use mask so color adapts to currentColor */
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>') center/contain no-repeat;
}


/* ======= LAYOUT ======= */
/* Header */
header {
    padding: 5vw 5vw 0 5vw;
    display: flex;
    flex-wrap: wrap;
    position: absolute;
    width: 100%;
    z-index: 2;
    align-items: center;
}

header h1 {
    font-size: 1.5em;
    flex: 1;
    white-space: nowrap;
    padding: 0 5vw 0 0;
    margin: 0;
    line-height: 2;
}

/* Navigation */
nav a {
    position: relative;
    padding: 0.5em 1em;
    background-color: var(--bgcolor);
    color: var(--highlight);
}

nav a.selected,
nav a:hover {
    background-color: var(--highlight);
    color: var(--bgcolor);
    border-radius: 30px;
}

nav a:not(:last-of-type) {
    margin-right: 1.5vw;
}

/* Sections */
main, section {
    padding-top: calc(5vw + 50px);
}

section {
    padding: calc(6em + 5vw) 5vw 8vw 5vw;
    display: block;
    position: absolute;
    top: 0;
    min-height: 100vh;
    width: 100%;
    background: var(--bgcolor);
}

section#home {
    display: block;
}

section h1 {
    font-size: 1em;
    margin: 0 0 1em 0;
}

/* ======= COMPONENTS ======= */
/* Lists */
ul {
    list-style-type: disc;
}

li {
    margin-bottom: .2em;
}

ul, ol {
    padding-left: 2ch;
}

/* Pagination */
.pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 2em 0;
    padding: 0;
    max-width: 80ch;
    position: relative;
}

.pagination-prev {
    position: absolute;
    left: 0;
}

.pagination-info { font-size: 0.9em; opacity: 0.7; }

.pagination-next {
    position: absolute;
    right: 0;
}

.pagination a {
    color: var(--highlight);
    text-decoration: none;
    font-size: 0.9em;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.pagination a:hover {
    opacity: 1;
    border-bottom: 1px solid var(--highlight);
}

.pagination-prev a::before {
    content: "← ";
}

.pagination-next a::after {
    content: " →";
}

/* Tags */
.post-tags {
    margin: 0.2em 0 0.8em 0;
}

.tag {
    display: inline-block;
    background-color: rgba(var(--highlight-rgb), 0.1);
    color: var(--highlight);
    padding: 0.2em 0.8em;
    margin-right: 0.2em;
    margin-bottom: 0.2em;
    border-radius: 30px;
    font-size: 0.85em;
    opacity: 0.8;
    transition: all 0.2s ease;
}

.tag:hover {
    background-color: var(--highlight);
    color: var(--bgcolor);
    border-bottom: none;
}

.tag::before {
    content: "#";
    margin-right: 0.05em;
    opacity: 0.8;
    font-size: 0.85em;
}

tags-cloud {
    list-style-type: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.8em;
}

.tags-cloud li {
    margin: 0;
}

/* Articles */
article + article {
    margin-top: 2.5em;
}

article h2 {
    font-weight: 700;
    margin: 0 0 0.5em 0;
}

article time {
    margin-right: .6em;
    font-size: .8em;
    font-weight: 400;
    opacity: .7;
}

/* Media elements */
img {
    display: block;
    max-width: 100%;
    height: auto;
    fill: currentColor;
}

.icon {
    width: 18px;
    height: 18px;
    display: inline;
    vertical-align: text-bottom;
}

/* Figures */
figure {
    margin: 2em 0 1.5em 0;
}

figure figcaption {
    margin: 0.8em 0 0 0;
    font-size: .85em;
    opacity: .7;
}

/* Pure CSS inline footnotes using checkbox trick */
.footnote-trigger {
    cursor: pointer;
    vertical-align: super;
    line-height: 1;
    font-size: .7em;
    color: var(--highlight);
}

.footnote-trigger:before {
    content: "[";
}

.footnote-trigger:after {
    content: "]";
}

/* Hide the checkbox input */
.footnote-checkbox {
    display: none;
}

/* Hide footnotes by default */
.footnote-aside {
    display: none;
    background-color: rgba(var(--highlight-rgb), 0.05);
    margin: 0.6m 0;
    padding: 1em 1.2em 1em 2em;
    font-size: 0.9em;
    line-height: 1.6;
    border-radius: 8px;
}

/* Show footnote when checkbox is checked OR when hovering over the label */
.footnote-checkbox:checked + .footnote-aside,
.footnote-trigger:hover + .footnote-checkbox + .footnote-aside {
    display: block;
}

@media (prefers-color-scheme: dark) {
    /* Dark mode adjustments */
    body {
        background: #121212;
        color: #e0e0e0;
    }

    h2, h3, h4 {
        color: #ffc400;
    }

    a {
        color: #ffc400;
    }

    hr {
        background: rgba(255, 255, 255, 0.1);
    }

    blockquote {
        background-color: rgba(255, 255, 255, 0.05);
    }
    
    .footnote-aside {
        background-color: rgba(255, 255, 255, 0.05);
    }

    details {
        border-color: rgba(255, 196, 0, 0.1);
    }

    summary {
        background-color: rgba(255, 196, 0, 0.03);
        border-bottom-color: rgba(255, 196, 0, 0.1);
    }

    /* Add any other dark mode specific styles here */
}

/* ======= MEDIA QUERIES ======= */
@media only screen and (max-width: 680px) {
    body {
        font-size: 16px;
    }
    
    /* Vocabulary specific mobile adjustments */
    dl {
        max-width: 45ch;
    }
    
    details {
        max-width: 45ch;
        margin-bottom: 0.6em;
    }
}

@media only screen and (max-width: 540px) {
    /* Extra small mobile adjustments */
    dl {
        max-width: 95vw;
    }
    
    details {
        max-width: 95vw;
    }
}

@media only screen and (min-width: 1024px) {
    /* Larger screen optimizations */
    dl {
        max-width: 70ch;
    }
    
    details {
        max-width: 100%;
    }
}
